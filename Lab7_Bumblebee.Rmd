---
title: "Lab7_Bumblebee"
author: "Rachael Robinson, William Brickowski, Manasi Raol, Brady Kiesling"
date: "2/27/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Description of the individual household electric power consumption data set

General description - This dataset is hosted by the UC Irvine Machine Learning Repository. It represents data from one household, over the course of roughly 4 years. The measurements under consideration are those dealing with the electric power consumption. Every minute, data from the house was sampled and power consumption is represented in multiple different ways such as voltage, active and reactive power, current intensity. The data also evaluates consumption in key areas of the house like the kitchen and water heater. The 9 variables in the data set are described in further detail.

Variables:

Global_active_power - 

Global_reactive_power - 

Voltage - 

Global_intensity - 

Sub_metering_1, Sub_metering_2, Sub_metering_3 - 


### How we dealt with the missing data


## Individual Findings


### William


### Brady


### Manasi


### Rachael


Question to answer: How do the three sub-meters of recorded data (Kitchen, Laundry, and Water heating/air conditioning) change in average consumption across a year?

The following is my plot answering the question:

```{r, echo = FALSE, message = FALSE, error= FALSE}

#setup

library(tidyverse)
methods(plot)
install.packages("data.table")
library(data.table)
library(hms)

#extracting data, aggregating consumption by day

powerhouse3 <- powerful_house_time %>%
  filter(!is.na(daysince), !is.na(Sub_metering_3)) %>%
  group_by(daysince) %>%
  summarise(avgDaily3 = mean(Sub_metering_3))

powerhouse2 <- powerful_house_time %>%
  filter(!is.na(daysince), !is.na(Sub_metering_2)) %>%
  group_by(daysince) %>%
  summarise(avgDaily2 = mean(Sub_metering_2))

powerhouse1 <- powerful_house_time %>%
  filter(!is.na(daysince), !is.na(Sub_metering_1)) %>%
  group_by(daysince) %>%
  summarise(avgDaily1 = mean(Sub_metering_1))

#plot

ggplot() +
  geom_line(data = powerhouse1, mapping = aes(x = daysince, y = avgDaily1, col = "Kitchen")) +
  geom_line(data = powerhouse2, mapping = aes(x=daysince, y = avgDaily2, col = "Laundry Room")) +
  geom_line(data = powerhouse3, mapping = aes(x=daysince, y = avgDaily3, col = "Water heater/air conditioner")) +
  labs(title = "Average active energy consumption over the course of the year", subtitle = "Data from individual household over approximately 4 years, aggregated by days into the year", col = "Sub-meter type") +
  xlab("Days since Jan 1") +
  ylab("Average consumption (Watt-hour)") +
  theme_classic()


```


To answer this question, I decided to compress the data slightly to create manageable time series data. In this way, I created a new variable which represented the days since the beginning of the year for each data measurement. Then, to account for all the sampling over the course of the day, and each time we reach that exact day every year for 4 years, I averaged the energy consumption for each sub-section of the house for that specific day characteristic.

For example, if we looked at the 232 day of the year, then the average represented on the plot is the average of all the data points from every observation from the 232nd day for each part of the house. Plotting the aggregate data for the year, we can see how each of these parts of the house change in their energy usage across the year, and examine the differences if any exist.

From the plot, it's clear that the Water heater and air conditioner and the largest consumers of energy of the three subsections. Across the entire year, the average energy consumption is higher for that area of the house. The kithen and laundry room represent similar energy usage across the year, and with higher consistency.

One noticeable dip occurs in the water/air section around day 232. This is around the end of August, so it's a reasonable guess that as it's the hottest time of the year, less energy is being consumed for the water heater. However, I would not necessarily anticipate the air conditioner usage to decrease significantly during this time, so these data points may require further consideration.

I calculated the following table of averages across all observations to confirm speculations from the plot.

```{r, echo = FALSE}
agghouse <- powerful_house_time %>%
  filter(!is.na(daysince), !is.na(Sub_metering_3),!is.na(Sub_metering_2), !is.na(Sub_metering_1)) %>%
  summarise(Kitchen = mean(Sub_metering_1), Laundry = mean(Sub_metering_2), 'Water/Air' = mean(Sub_metering_3))

print(agghouse)
```


All units are in Watt-hours. These averages are consistent with the plot, with the Kitchen showing lowest average consumption at 1.12 Watt-hours, followed closely by the laundry room at 1.3 Watt-hours. However, the water heater and air conditioner supercede them both significantly with 6.46 Watt-hours in average consumption. This confirms the conclusion that the water heater and air conditioner are the largest contributers to the energy usage in the house.

Why this question is interesting- Homeowners, home developers, appliance manufactorers, and electricans might all be interested in the areas of a house which are the largest consumers of energy. Knowing where the most energy is consumed in a house can answer all kinds of economic and practical design questions. In addition, adding a temporal consideration introduces even more factors to consider. The time of year can impact how we use energy, and can help us identify when our energy use is excessive. These questions answered by my plot and statistics are interesting in developing these considerations.

How I came up with this question- To come up with this question, I employed a lot of statistical strategies. First, I calculated a correlation table to try to identify any prominent relationship between the variables. This is when I started noticing the relative strength of the relationship between the energy usage in sub-sections of the house versus global usage. To expand on this, I used statistical tests and plotting to see if there were any linear relationships between sub-section energy usage and global usage. Coming up short, I decided to answer a slightly different but similar question by simply evaluating the temporal relationships and relative energy consumptions across the different sub-sections of the house.
